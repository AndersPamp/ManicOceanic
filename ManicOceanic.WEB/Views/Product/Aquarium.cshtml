@model IList<ManicOceanic.DOMAIN.Entities.Products.Product>
@{
    ViewData["Title"] = "Aquarium";
}

<h1>Aquarium</h1>

<div class="container">

    <div class="row">
        @foreach (var product in Model)
        {
            <div class="myProductArea">

                <div class="myProductImg">
                    <a asp-controller="Product" asp-action="ShowDetail" asp-route-productNumber="@product.ProductNumber"><img src="@product.ImageUrl" class="myImg" /></a>
                </div>


                <div class="myProductInfo">
                    <div>@product.Name</div>
                    <div>@product.Price kr</div>
                    <div class="btn-cart" data-product-Count="@product.Stock">
                        @Html.ActionLink("Add to cart", "OrderNow", "ProductCart", new { id = product.Id }, null)
                    </div>
                </div>

            </div>
        }

    </div>

</div>


@section Scripts
{
    <script>
        $(document).ready(function () {
            $(".btn-cart").each(function () {
                var stock = $(this).data("productCount");
                if (stock == 0) {
                    var txt = "Out of order!";
                    $(this).css('color', 'red');
                    $(this).html(txt);
                }
            });
        });
    </script>
}
