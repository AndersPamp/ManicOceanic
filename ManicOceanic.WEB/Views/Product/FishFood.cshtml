@using ManicOceanic.WEB.Models;
@*@using PagedList;*@

@model IList<ManicOceanic.DOMAIN.Entities.Products.Product>

@using Microsoft.AspNetCore.Http

@{
    ViewData["Title"] = "FishFood";
}

<h1>FishFood</h1>

<style>
    .product-grid {
        display: grid;
        grid: auto / repeat(4, 1fr);
        grid-gap: 40px 20px;
    }

    .grid-item {
        justify-self: center;
        align-self: center;
        text-align: center;
    }



    .product-name {
    }

    .product-price {
    }

    .product-img {
    }
</style>

<div class="product-grid">
    @foreach (var product in Model)
    {
        <div class="grid-item">
            <a asp-controller="Product" asp-action="ShowDetail" asp-route-productNumber="@product.ProductNumber">
                <img src="@product.ImageUrl" width="200px" />
            </a>
            <div class="product-price">@product.Price</div> <div>kr</div>
            <div class="product-name">@product.Name</div>
            <div class="btn-cart" data-product-Count="@product.Stock">
                @Html.ActionLink("Add to cart", "OrderNow", "ProductCart", new { id = product.Id }, null)
            </div>
        </div>

    }
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $(".btn-cart").each(function () {
                var stock = $(this).data("productCount");
                if (stock == 0) {
                    var txt = "Out of order!";
                    $(this).css('color', 'red');
                    $(this).html(txt);
                }
            });
        });
    </script>
}
